<form class="card car-card" action="/orders" method="POST">
  <img src="<%= car.image %>" alt="<%= car.name %>" loading="lazy" decoding="async">

  <div class="card-body">
    <h3><%= car.name %></h3>

    <ul class="car-specs">
      <li><%= car.transmission %> Transmission</li>
      <li><%= car.fuelType %></li>
    </ul>

    <div class="pricing">
      <%
        const displayRentalDays = Number(car.rentalDays || rentalDays || 0);
        const unitPrice = Number((car.unitPrice ?? car.price) || 0);
        const deliveryFee = Number(car.deliveryPrice ?? deliveryPrice ?? 0);
        const returnFee = Number(car.returnPrice ?? returnPrice ?? 0);
        const totalFee = Number(car.totalPrice || 0);
      %>
      <span class="daily">Price per day: $<%= unitPrice.toFixed(2) %></span>
      <% if (pickupLocation !== 'office' || returnLocation !== 'office') { %>
        <span class="delivery">Delivery Price: $<%= deliveryFee.toFixed(2) %></span>
        <span class="return">Return Price: $<%= returnFee.toFixed(2) %></span>
      <% } %>
      <span class="total">
        Total for <%= displayRentalDays %> day<%= displayRentalDays > 1 ? 's' : '' %>:
        $<%= totalFee.toFixed(2) %>
        <% if (pickupLocation !== 'office' || returnLocation !== 'office') { %>
          (including delivery and return)
        <% } %>
      </span>
      <div class="location-info" style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">
        <span>üìç <%= pickupLocation %> ‚Üí <%= returnLocation %></span>
      </div>
    </div>
  </div>

  <input type="hidden" name="pickup-date"     value="<%= pickupDate %>">
  <input type="hidden" name="return-date"     value="<%= returnDate %>">
  <input type="hidden" name="pickup-location" value="<%= pickupLocation %>">
  <input type="hidden" name="return-location" value="<%= returnLocation %>">
  <input type="hidden" name="carId"           value="<%= car._id %>">
  <input type="hidden" name="pickup-time"     value="<%= pickupTime %>">
  <input type="hidden" name="return-time"     value="<%= returnTime %>">
  <input type="hidden" name="rental-days"     value="<%= car.rentalDays || rentalDays %>">
  <input type="hidden" name="delivery-price"  value="<%= car.deliveryPrice %>">
  <input type="hidden" name="return-price"    value="<%= car.returnPrice %>">
  <input type="hidden" name="total-price"     value="<%= car.totalPrice %>">
  <input type="hidden" name="car-price"       value="<%= car.unitPrice ?? car.price %>">
  <button class="order-btn">Book Now</button>
</form>