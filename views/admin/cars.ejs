<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> - LuxRide</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/footer.css">
</head>
<body>
    <%- include('../partials/header') %>
    <div class="admin-dashboard" style="padding:2rem; max-width:1300px; margin:0 auto;">
        <div class="admin-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.2rem; gap:1rem;">
            <h1 class="admin-title" style="color:#ffd23f; margin:0;">Manage Cars</h1>
            <a href="/admin/cars/new" class="btn btn-add-car" style="text-decoration:none;">Add Car</a>
        </div>

        <div class="grid-cards" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.2rem;">
            <% (cars || []).forEach(car => { %>
            <div class="card car-card" style="background: rgba(24,24,24,0.8); border: 2px solid #ffd23f; border-radius: 12px; overflow:hidden; display:flex; flex-direction:column;">
                <div class="card-media" style="background:#0a0a0a; aspect-ratio: 4/3;">
                    <% if (car.image) { %>
                        <img src="<%= car.image %>" alt="<%= car.name %>" style="width:100%; height:100%; object-fit:cover; display:block;" />
                    <% } %>
                </div>
                <div class="card-content" style="padding: 0.9rem 1rem 1.1rem; display:flex; flex-direction:column; gap:.55rem;">
                    <div class="car-title" style="display:flex; align-items:center; justify-content:space-between; gap:0.5rem;">
                        <strong style="font-size:1.05rem; color:#ffd23f;"><%= car.name %></strong>
                        <span class="availability <%= car.availability ? 'available' : 'unavailable' %>" style="display:inline-flex; align-items:center; gap:.4rem; font-weight:800; font-size:.85rem;">
                            <span class="dot" style="width:.55rem; height:.55rem; border-radius:50%; display:inline-block; background:<%= car.availability ? '#22c55e' : '#ef4444' %>;"></span>
                            <%= car.availability ? 'Available' : 'Unavailable' %>
                        </span>
                    </div>

                    <ul class="car-specs" style="list-style:none; padding:0; margin:0.25rem 0 0.6rem; display:flex; flex-wrap:wrap; gap:0.4rem;">
                        <li class="spec" style="border:1.6px solid #ffd23f; border-radius:999px; padding:0.3rem 0.55rem; color:#ffd23f; font-size:0.82rem; font-weight:700;">Transmission: <%= car.transmission %></li>
                        <li class="spec" style="border:1.6px solid #ffd23f; border-radius:999px; padding:0.3rem 0.55rem; color:#ffd23f; font-size:0.82rem; font-weight:700;">Seats: <%= car.seats %></li>
                        <li class="spec" style="border:1.6px solid #ffd23f; border-radius:999px; padding:0.3rem 0.55rem; color:#ffd23f; font-size:0.82rem; font-weight:700;">Fuel: <%= car.fuelType %></li>
                        <li class="spec" style="border:1.6px solid #ffd23f; border-radius:999px; padding:0.3rem 0.55rem; color:#ffd23f; font-size:0.82rem; font-weight:700;">Price: â‚¬<%= car.price %>/day</li>
                    </ul>

                    <div class="admin-actions" style="display:flex; gap:.5rem; margin-top:auto;">
                        <a class="btn-admin btn-edit" href="/admin/cars/<%= car._id %>/edit" style="padding:0.5rem 1rem; border:1px solid #3b82f6; color:#3b82f6; border-radius:4px; text-decoration:none;">Edit</a>
                        <form action="/admin/cars/<%= car._id %>/delete" method="POST" style="display:inline;">
                            <input type="hidden" name="_csrf" value="<%= csrfToken || '' %>">
                            <button class="btn-admin btn-delete" type="submit" style="padding:0.5rem 1rem; border:1px solid #ef4444; color:#ef4444; border-radius:4px; background:transparent; cursor:pointer;">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
            <% }) %>
        </div>
    </div>
    <style>
        @media (max-width: 1200px) {
            .grid-cards { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)) !important; }
        }
        @media (max-width: 900px) {
            .grid-cards { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)) !important; }
        }
        @media (max-width: 700px) {
            .grid-cards { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)) !important; }
        }
        @media (max-width: 520px) {
            .grid-cards { grid-template-columns: 1fr !important; }
            .admin-dashboard { padding: 1rem !important; }
            .card.car-card { border-width: 2px; }
            .card.car-card .card-media { aspect-ratio: 16/9 !important; }
            .card.car-card .car-title strong { font-size: 1rem !important; }
            .car-specs { gap: .35rem !important; }
            .car-specs .spec { font-size: .78rem !important; padding: .28rem .5rem !important; }
            .admin-actions { gap: .4rem !important; }
            .admin-actions a, .admin-actions button { flex: 1 1 0; width: 100%; text-align: center; border-radius: 8px !important; }
        }
        @media (max-width: 360px) {
            .admin-dashboard { padding: 0.8rem !important; }
            .car-specs .spec { font-size: .74rem !important; padding: .24rem .45rem !important; }
            .card.car-card .card-media { aspect-ratio: 4/3 !important; }
        }
    </style>
    <%- include('../partials/footer') %>
    <script src="/js/mobileNav.js"></script>
</body>
</html>


